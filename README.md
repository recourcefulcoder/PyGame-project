# PyGame-project
A project, using pygame tools for Yandex.Lyceum
Here we create a game, which idea is as follows - Exists a main hero, miner, which task is to explode enemy sniper towers. He is walking across the map, plants bombs under towers and explodes them. During the process of completing his goal he tries to avoid mines, those were planted by enemies to protect towers. Their location is not availible in the begining, but person can find them out with help of special tools on the map or by remembering their location when is getting exploded. 

The folloing documentation is written in russian language.

Реализация основных игровых возможностей (хождение персонажа, установка бомбы) реализована посредством двух классов - Player и BombAnimationPack. Помимо прочего реализована функция load_image, которая, как понятно из названия, загружает изображение из data/images, преобразуя его форму, с которой будет работтаьт pygame.

Поподробнее о реализованных классах.
 
                                                                                 КЛАСС Player
Класс, наследуемый от pygame.sprite.Sprite, инициализирующий игрока

ПОЛЯ КЛАССА:

*current_orientation* - поле, отображающее, какого направление взгляда персонажа - смотрит ли он влево, вправо и тд. Используется для смены кадров в анимации движения и соответствует "строке" в картинке со спрайтами для анимации (индексаци с нуля). Т.е. при current_orientation == 0, кадры для анимации движения берутся из первой строки в изображении player_image.png (располагается, как и все изображения, в data/images) - персонаж повернут лицом к игроку; при current_orientation == 1, епрсонаж повёрнут к игроку левым боком (2 строка изображения со спрайтами); по аналогии значение 2 означает, что персонаж повёрнут спиной; значение 3 - что персонаж повёрнут правым боком

*last_animation_step* - отображает, какой по номеру кадр из текущей строки был взят последним для анимации движения персонажа. Держит целыочисленные значения в диапазоне от 0 до 3-ёх

*can_move* - задаёт, может пероснажу изменять своё положение. Например, в процессе установки бомбы self.can_move == False. Держит логические значения. 

*player_is_moving* - переменная, показывающая, необходима ли анимация движения - в случае player_is_moving == False, эта анимация не запуститсяю Держит логические значения

*image_width, image_height* - константы, задающие размеры спрайта персонажа

*full_image* (может быть встречено обозначение current_image, в зависимости от версии программы) - загруженное как поле класса изображение player_image.png

*image* - наследуемое от класса pygame.sprite.Sprite поле, в котором лежит текущий отображаемый кадр изображения персонажа

*rect* - наследуемое от класса pygame.sprite.Sprite поле, в котором лежит значение pygame.Rect, описывающее положение спрайта на экране, а также его ширину/высоту

*clock* (может быть встречено значение player_clock, в зависимости от версии программы) - поле, являющееся объектом класса pygame.time.Clock. Может быть использовано при анимации смерти персонажа от взрыва.

*screen* - значение, содержаще экран, на котором должен отрисовываться спрайт персонажа.

*detonate_zone|attack_zone* - константы, отображаюющие радиус окражуности, задающей зону детонации/поражения бомбы, установленной игроком, соответственно.

*bomb_planted* - поле, указывающее, установил ли игрок бомбу. Игрок не может установить ещё одну бомбу, пока не взорвал предыдущую, поэтому существование такого поля обоснованно. Сожержит логические значения.

*bomb_animation_pack* - поле, содержащее объект класса BombAnimationPack. С его помощю отрисовываются границы зон детонации/атаки, полоска прогресса установки, анимация взрыва бомбы. (подробнее см. описание класса BombAnimationPack)

*bomb_pos* - текущая позиция установленной бомбы. Содержит либо координаты бомбы, в сслучае, если та находится в процессе установки/уже установлена, либо список из двух значений [None, None] в случае, если бомба не устанавливается/не установлена.

МЕТОДЫ КЛАССА:

*move(self, moving_vector)*

Действие: Смещенние спрайта персонажа при движении

Аргумент: moving_vector - список из двух значений, первое из которых - смещение по оси Ox, второй - по оси Oy

Принцип действия: в ранних версия проекта - применяется метод move к полю rect объекта класса. В поздних версиях проекта - 


*plant_bomb(self)*

Действие: указывает, что установка бомбы началась

Принцип действия: устанавливает позицию бомбы, блокирует передвижение персонажа и запускает анимацию установки бомбы


*detonate_bomb(self)*

Действие: взрывает бомбу, если персонаж находится в зоне детонации

Принцип действия: проверяется, что бомба установлена. Затем рассчитывается расстояние от игрока до бомбы, и если оно не больше значения поля detonation_zone, указывается, что бобмы больше нет и запускается анимация подрыва бомбы. Если расстояние от игрока до бомбы не больше зоны поражения, запускается анимация смерти. 

*change_picture(self)*

Действие: меняет изображение персонажа для создания анимации движения.

Принцип действия: если игрок не может двигаться, изображение изменяется на первое в выбранной игроком строке (при нажатии кнопки "влево", персонжа поворчачивается к пользователю левым боком), в противном случае изменяется значение last_animation_step и выбирается кадр из full_image. Значение current_orientatino Изменяется в основном коде программы.



                                                                             КЛАСС BombAnimationPack
ПОЛЯ КЛАССА:

*time_gone* - переменная-таймер для анимаций расширения зоны детонации/поражения и полоски прогресса. Содержит время, прошедшее с начала процесса установки бомбы в миллисекундах.

*clock* - обект класса pygame.time.Clock. 

*time_period* - значение, указывающее, какое количество времени (в секундах) должна устанавливаться бомба.

*process_dead* - поле, указывающее, идёт ли процесс установки бомбы. process_dead == True <-> бомба не устанавливается, process_dead == False <-> бомба устанавливается

*alpha_screen* - объект класса pygame.Surface; поверхность, на которой идёт отрисовка зон поражения/детонации бомбы. Обладает прозрачностью и в конце каждой отрисовки накладывается на основной экран.

*player* - игрок, к которму привязан пакет анимаций. От него рассчитывается местоположение зон детонации/поражения бомбы, метоположение линии прогресса и проч.

*explosion_image* - полное изображение со всеми кадрами анимации взрыва бомбы.

*exp_image_group* - объект класса pygame.sprite.Group, в котором лежит спрайт взрыва, и который отрисовывается в процессе анимации взрыва бомбы.

*current_exp_image* - объект класса pygame.sprite.Sprite, переменная image которго хранит текущий кадр анимации взрыва бомбы. В начале работы программы image оказывается не инициализированным, после первого врзыва там по умолчанию лежит последний кадр анимации ("по умолчанию" означает во время, в которое не запущенаанимация взрыва бомбы).

*exp_row_cnt|exp_col_cnt* - своего рода "координаты" используемого в данный момент спрайта взрыва в анимации. exp_row_cnt показывется строку explosion_image, из которой берётся спрайт, exp_col_cnt - столбец (нумерация с нуля). По умолчанию exp_col_cnt == -1, exp_row_cnt == -2.

*exp_timer* - несипользуемое поле, присутствующаее в старых версиях программы.

МЕТОДЫ КЛАССА:

*update(self)*

Действие: запускает все требуемые анимации

Прицнип действия: вычисляет, при помощи self.clock врем, прощедшее с последнего вызова функции update и вызывает методы update_progress_bar(value), update_bomb_borders() и animate_explosion().

*update_progress_bar(self, value)*

Действие: отрисовывает полоску прогресса, если процесс утсановки бомбы идёт; одновляет переменную time_gone для осиальных методов

Аргумент: value - время, прошедшее с последнего вызова функции отрисовки

Принцип действия: -

*update_bomb_borders(self)*

Действие: отрисовывает границы зон детонации/поражения бомбы на alpha screen, после чего накладывает тот на основной экран (экран персонажа)

*animate_explosion(self)*

Действие: если нужно, меняет кадр анимации бомбы и отрисовывает его.

Принцип действия: -

*kill_process_bar(self)*

Действие: уничтожает процесс установки бомбы (изменяет переменный объекта класса BombAnimationPack таким образом, что пока процесс не будет установки бомбы не будет запущен в методах объекта класса Player, не будет производится отрисовка зон детонации/поражения бомбы и линию прогресса)

Принцип действия: - 
